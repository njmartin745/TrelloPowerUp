<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
</head>
<body>
  <form id="effort-form">
    <label for="effort-input">Assign effort (in hours):</label>
    <input type="number" id="effort-input" min="0" step="0.5" required>
    <button type="submit" class="mod-primary">Save</button>
  </form>
  <script>
    var t = TrelloPowerUp.iframe();

    // Load any existing effort data
    t.get('card', 'shared', 'effort')
    .then(function(effort) {
      if (effort) {
        document.getElementById('effort-input').value = effort;
      }
    });

    // Handle form submission
    document.getElementById('effort-form').addEventListener('submit', function(event) {
      event.preventDefault();
      var effort = parseFloat(document.getElementById('effort-input').value);
      t.set('card', 'shared', 'effort', effort)
      .then(function() {
        t.closePopup();
      });
    });
  </script>
</body>
</html>